#!/bin/bash

# AppRun script for ProductivityCake
SELF=$(readlink -f "$0")
HERE=${SELF%/*}

# Export library paths - include both usr/lib and usr/bin for .so files
export LD_LIBRARY_PATH="${HERE}/usr/lib:${HERE}/usr/bin:${LD_LIBRARY_PATH}"
export PATH="${HERE}/usr/bin:${PATH}"

# Set data directory to user's home to avoid read-only filesystem issues
# This ensures the app writes data to ~/.local/share/ProductivityCake instead of the AppImage mount
export XDG_DATA_HOME="${XDG_DATA_HOME:-$HOME/.local/share}"
export XDG_CONFIG_HOME="${XDG_CONFIG_HOME:-$HOME/.config}"

# Change to user's home directory (not the AppImage mount point)
cd "$HOME"

# Run the application
exec "${HERE}/usr/bin/ProductivityCake" "$@"
